---
layout: default
title: Replay hostos feature change 
parent: Developer Information
---
## Audience

Engineers who wish to rerun a deploy of the current hostos version in order to implement a feature change. For example enabling/disabling LDAP.

## Overview

1. Create the PR to update `environment.yaml` with the FORCE flag. (this will automatically create a CR).
2. Create another PR for the lock in `status.yaml` (wait for CR ticket to be created using step 1, it will be noted in PR automatically after a few minutes. )
3. Obtain the lock (i.e. PR gets merged in step 2\.)
4. Ask to have the CR approved. Since this is an automated one, you will need Don or Dean to approve it.
5. Release the lock (another PR for `status.yaml`)
6. DO NOT Merge the PR (from step 1\.) with the force flag. It should be closed and branch deleted

## Steps

Update the appropriate files in [https://github.ibm.com/nextgen\-environments](https://github.ibm.com/nextgen-environments). These are `environment.yaml` and `status.yaml`

1. Add the force flag to `environment.yaml` and create a PR.  
E.g. :


`- name: hostos-post-config-release`  
`runs:`  
`- version: 2.5.79-20220716T084216Z_d646412`  
`- version: 3.5.79-20220716T084253Z_0ffa960`  
`- version: 5.5.79-20220716T084223Z_a58c053`  
`force: true`
2. Add a lock to `status.yaml`, update the ***reason***, and create a separate PR.   
E.g.:


`name: osa-prod`  
`locks:`  
`- mzone: mzone2n7`  
`locked: true`  
`reason: "<CR number> - Rerun hostos-config for LDAP enablement"`  
`ipsec: true`  
`mtls: true`  
`mtls_strict: false`  
`bm-nodes: false`  
`z-nodes: false`  
`badnodes:`
3. The creation of the PR for the `environment.yaml` will trigger the generation of a CR.
	1. Update the ***reason*** in the `status.yaml` PR with the CR number
4. Merge the PR for `status.yaml`, but not the one for `environment.yaml``.`  

	1. Update the CR with any steps specific for this run.  (if only 1 mzone, remove detailed steps about the other mzones)
	2. Also make sure the start/end dates make sense.
	3. Ask to have the CR approved. Since this is an automated one, you will need Don or Dean to approve it.
5. Once the CR has been executed, release the lock with another PR ( `locked: false, reason: ""` )
6. Close the PR for `environment.yaml` and delete the branch.  ( Do not merge )

  


  




 


Document generated by Confluence on Jul 15, 2024 13:04


[Atlassian](https://www.atlassian.com/)


 


